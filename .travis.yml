sudo: required

services:
  - docker

# travis runs implicitly 'mvn test' and 'mvn install' if it finds a 'pom.xml' in the root.
# see https://docs.travis-ci.com/user/languages/java/
language: java
jdk: oraclejdk8

# see https://docs.travis-ci.com/user/environment-variables/#Encrypting-environment-variables
# they are tied to the repository in travis!
env:
  global:
    - secure: "Ewt9paqDoKVem+o9ctxprewRN4+P828gGWMQJdJ9roEi+Lk1SnixkKuLOLVk+BwVLkJX7p8BDnU/ZT61u7yH/Iw3C16mZLdqkgdXT7jo8Kte5jji/52VB8mIiQepSBn8bM7y0CE/pQHYTlfn3K2m/XQGtiEvhWiQwsyCtt+4DTiVTT6NcpFaPPA38sRZg618kSvANx0YQTl4YHXUx3t3e3BW+yKvcMz4BrE3dR9wOxZWI4suhlqKXn6YFcuokh92GrbYhHZtv1skrs3+zDZPTQnuQgo+FNsTg2iTcW9YjAw+EIftqU9nvhZMVKCHvaRVFRn2vU9s2+YYMLBv8KMjQFcMCp7kCTKm9jCR9xbL3/CKvTGV3UUUkNMy1QTGJ42nap9dwycwAJs1m4IypID9lpmo1yO0RwR592d8eHNxVzAltcAbCCcdkRawQvjakCtjTpQ4w9Te5UN2CRrW5rgrmLoApnOQOU5ImAViMWBFno0j1oxndujmZv3xlP1XZrlUqZNlJJTARv4/XAKV94D5jQwvQ7KiaQP6uiZ8ESp7TDqSwtTr/1LGpiK7N/Nok65SGnHUhAFK+licVfAD+Ia+7WDOhQz5/hXIMO7t/yAk/2dLigZoJxv/gTyL1Zbw89AwwEdHyaHr4fc6s8PVfAH/pV4C5TgodNZwMZHKfgmxxFE=" # DOCKER_EMAIL
    - secure: "jFlfJewKkTTwWHlILiYWsGiii6TWQeBma/bpOWfGmVXMIE4Y3AYyqQQ3KaXgGgAnvj7o9e/qQ4OfxtnepoQHgBuZb6/oAQI7IjQ8wVEzNiBLwzi+oI+3/yhbp7zcp+scswRo9TFwHKdxape6JTuKiYingNeWwUXrqZACiaQ4FAzD2UZKpYN8kX0SJPapku3g6Uxn6czpeXlO9vkxGB+h09MdSwAGz1sIgEUhPa0EcmEbbxxdne5oWxPyH0TJw+eIcGhqAfltASqFgQLlFr8SpdoPzCF3aCYRvFGboQRyKp4HfEcTUOFk+lMRO2UsDJeOGVEaU3mC0rs4RXS8wvPNF5g2PsRN+JKsZ8yEJtgqXp7D7cGEAJqEbTwKPibvKSAyeFJdpBRNaCOg3vWNoE+pTHxlJu7Zgko1Jt4jsr8SdC/zLi14Mikf1bOwp/nJh053ArS/f1bS0D2ZzuIe/b4NThsCrJaKTyiprOrKF7JZFCScIlRVGSGH3+HC+Vnoch5ilSFf/UiD3u+5JD+SIHnvv1RYEzXMGAnTudmuZxE2utBqkIFWXf6e+vF6ZErqkSUmSQZx2Eqlz7HBvpNZddnmJn3R7A0BmjCqdYcnxrvd1I4eXgcytVIXcg2HLTmCcxfxB7ZFfB712BLXnjTYqylKpJcdh61gkYM6Kk9Y+tGGWyk=" # DOCKER_USER
    - secure: "Jow7esp4Qad03jyXg5Wzemt2mjhEY/u2fsvwGMbxy31OOoKcdt4a5OdiXrS4uB4vtdoVaUOfH+xxuezbFSXCekx/xqfmclEnl0rLOZQpVZvFvH8xWeiUsO0GvoFxgqB57W0dO95KspzsEko/r9ASmGEle2OyaDUKJcSZIMWvDgZdMQvk9O8z/ywfeIsXC8iPBgsgn6ZRcUqbtyUERilY2/5kEgwVkZrJPqIwwYCNF3DSy89LgE5qitUEveaDIVbTqHpCUAciAEmggtBngvXAC2FWKbH7IlDxfyfV+GiDyVBABUlX9xT+G4LaDJqc7jZO6SbZEJl/gCz50JWniUEViZ6tD8e/B/GdFcogJcDtNeydIqqPfAld5XFRwO02MA2VvpNdgPkY5EG5C49XoQSVt1jWqoRXHlF0rGz/iVE+By7TeRgyaYnF6vyHp6y96ZruDlH7myuk70uFwh+QFU2GoF2fA3gMkls8UWFMk3Dh5CiDWs03oOARJOBzsorjwYK0roFF7RdM0rkunkUOnvZ+sfzJAH/7G4q6AgxwuLAmcwD/XwINDVykY8SOSJnDxTsgybMaqt4ZViR+7seEIUK0zM8RWBSJhtWECCTyLBS5ZYiXGFo4p+EJolYu2L6jlrt/geqOUoT5bu2vCkw5lWYtlA2jCP19hOKSuIBVNx5cSzc=" # DOCKER_PASS
    - COMMIT=${TRAVIS_COMMIT::7}
     #TAG
    - TAG=$TRAVIS_BUILD_NUMBER

after_success:
    - mvn docker:build
    - mvn docker:push
  #- docker login -e $DOCKER_EMAIL -u $DOCKER_USER -p $DOCKER_PASS

  #PREFIX per group
  #- export GROUP=mefiroofficial

  # GATEWAY SERVICE
  #- export GATEWAY=$GROUP/api-gateway
  #-cd ./api-gateway
  #- mvn deploy
  #- cd ..

  # DISCOVERY SERVICE
  #- export DISCOVERY=$GROUP/discovery-service
  #- cd ./discovery-service
  #- mvn deploy
  #- cd ..

  # LOGIN SERVICE
  #- export LOGIN=$GROUP/login-microservice
  #- cd ./login-microservice
  #- mvn deploy
  #- cd ..

  # add more builds of services here...